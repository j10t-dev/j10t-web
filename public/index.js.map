{
  "version": 3,
  "sources": ["index.ts"],
  "sourcesContent": ["import type { TopLevelSpec } from \"https://esm.sh/vega-lite@5.16.3\";\n\ndeclare global {\n  interface Window {\n    vegaEmbed: (\n      el: string,\n      spec: TopLevelSpec,\n      opts: { renderer: string; actions: boolean },\n    ) => Promise<unknown>;\n  }\n}\n\nglobalThis.addEventListener(\"DOMContentLoaded\", () => {\n  fetch(\"/api/charts\")\n    .then((r: Response) => r.json())\n    .then((data: TopLevelSpec[]) => {\n      const visContainer = document.getElementById(\"vis\");\n      if (!visContainer) return;\n      visContainer.innerHTML = \"\";\n      data.forEach((chartSpec: TopLevelSpec, index: number) => {\n        const chartDiv = document.createElement(\"div\");\n        chartDiv.id = `chart-${index}`;\n        chartDiv.className = \"chart-container\";\n        visContainer.appendChild(chartDiv);\n        try {\n          const spec = typeof chartSpec === \"string\"\n            ? JSON.parse(chartSpec) as TopLevelSpec\n            : chartSpec;\n\n          (globalThis as typeof window).vegaEmbed(`#chart-${index}`, spec, {\n            renderer: \"svg\",\n            actions: false,\n          }).catch((_error: Error) => {\n            chartDiv.innerHTML = `<p>Failed to load chart</p>`;\n          });\n        } catch (_error) {\n          chartDiv.innerHTML = `<p>Failed to parse chart data</p>`;\n        }\n      });\n    })\n    .catch((_err: Error) => {\n      const visContainer = document.getElementById(\"vis\");\n      if (visContainer) visContainer.innerHTML = \"<p>Failed to load charts</p>\";\n    });\n});\n"],
  "mappings": "MAYA,WAAW,iBAAiB,mBAAoB,IAAM,CACpD,MAAM,aAAa,EAChB,KAAM,GAAgB,EAAE,KAAK,CAAC,EAC9B,KAAMA,GAAyB,CAC9B,IAAMC,EAAe,SAAS,eAAe,KAAK,EAC7CA,IACLA,EAAa,UAAY,GACzBD,EAAK,QAAQ,CAACE,EAAyBC,IAAkB,CACvD,IAAMC,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,GAAK,SAASD,CAAK,GAC5BC,EAAS,UAAY,kBACrBH,EAAa,YAAYG,CAAQ,EACjC,GAAI,CACF,IAAMC,EAAO,OAAOH,GAAc,SAC9B,KAAK,MAAMA,CAAS,EACpBA,EAEH,WAA6B,UAAU,UAAUC,CAAK,GAAIE,EAAM,CAC/D,SAAU,MACV,QAAS,EACX,CAAC,EAAE,MAAOC,GAAkB,CAC1BF,EAAS,UAAY,6BACvB,CAAC,CACH,MAAiB,CACfA,EAAS,UAAY,mCACvB,CACF,CAAC,EACH,CAAC,EACA,MAAOG,GAAgB,CACtB,IAAMN,EAAe,SAAS,eAAe,KAAK,EAC9CA,IAAcA,EAAa,UAAY,+BAC7C,CAAC,CACL,CAAC",
  "names": ["data", "visContainer", "chartSpec", "index", "chartDiv", "spec", "_error", "_err"]
}
