{
  "version": 3,
  "sources": ["index.ts"],
  "sourcesContent": ["// This file uses strong TypeScript types for Vega-Lite chart specifications.\n// See: https://vega.github.io/vega-lite/usage/typescript.html\n// If you add new chart types, use the TopLevelSpec type from Vega-Lite for type safety.\n\n// You may need to install the types for Vega-Lite if you want full type checking in your editor.\n// import type { TopLevelSpec } from 'vega-lite';\n\nimport type { TopLevelSpec } from \"https://esm.sh/vega-lite@5.16.3\";\n\ndeclare global {\n  interface Window {\n    vegaEmbed: (el: string, spec: TopLevelSpec, opts: { renderer: string; actions: boolean }) => Promise<unknown>;\n  }\n}\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  fetch('/api/charts')\n    .then((r: Response) => r.json())\n    .then((data: TopLevelSpec[]) => {\n      const visContainer = document.getElementById('vis');\n      if (!visContainer) return;\n      visContainer.innerHTML = '';\n      data.forEach((chartSpec: TopLevelSpec, index: number) => {\n        const chartDiv = document.createElement('div');\n        chartDiv.id = `chart-${index}`;\n        chartDiv.className = 'chart-container';\n        visContainer.appendChild(chartDiv);\n        try {\n          const spec: TopLevelSpec = typeof chartSpec === 'string' ? JSON.parse(chartSpec) : chartSpec;\n          window.vegaEmbed(`#chart-${index}`, spec, {\n            renderer: 'svg',\n            actions: false\n          }).catch((error: Error) => {\n            console.error(`Failed to render chart ${index}:`, error);\n            chartDiv.innerHTML = `<p>Failed to load chart</p>`;\n          });\n        } catch (error) {\n          console.error(`Error parsing chart ${index}:`, error);\n          chartDiv.innerHTML = `<p>Failed to parse chart data</p>`;\n        }\n      });\n    })\n    .catch((err: Error) => {\n      const visContainer = document.getElementById('vis');\n      if (visContainer) visContainer.innerHTML = '<p>Failed to load charts</p>';\n      console.error('Failed to fetch chart data:', err);\n    });\n}); "],
  "mappings": "MAeA,OAAO,iBAAiB,mBAAoB,IAAM,CAChD,MAAM,aAAa,EAChB,KAAM,GAAgB,EAAE,KAAK,CAAC,EAC9B,KAAMA,GAAyB,CAC9B,IAAMC,EAAe,SAAS,eAAe,KAAK,EAC7CA,IACLA,EAAa,UAAY,GACzBD,EAAK,QAAQ,CAACE,EAAyBC,IAAkB,CACvD,IAAMC,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,GAAK,SAASD,CAAK,GAC5BC,EAAS,UAAY,kBACrBH,EAAa,YAAYG,CAAQ,EACjC,GAAI,CACF,IAAMC,EAAqB,OAAOH,GAAc,SAAW,KAAK,MAAMA,CAAS,EAAIA,EACnF,OAAO,UAAU,UAAUC,CAAK,GAAIE,EAAM,CACxC,SAAU,MACV,QAAS,EACX,CAAC,EAAE,MAAOC,GAAiB,CACzB,QAAQ,MAAM,0BAA0BH,CAAK,IAAKG,CAAK,EACvDF,EAAS,UAAY,6BACvB,CAAC,CACH,OAASE,EAAO,CACd,QAAQ,MAAM,uBAAuBH,CAAK,IAAKG,CAAK,EACpDF,EAAS,UAAY,mCACvB,CACF,CAAC,EACH,CAAC,EACA,MAAOG,GAAe,CACrB,IAAMN,EAAe,SAAS,eAAe,KAAK,EAC9CA,IAAcA,EAAa,UAAY,gCAC3C,QAAQ,MAAM,8BAA+BM,CAAG,CAClD,CAAC,CACL,CAAC",
  "names": ["data", "visContainer", "chartSpec", "index", "chartDiv", "spec", "error", "err"]
}
